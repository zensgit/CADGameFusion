# Qt UI Shell å¼€å‘è®¡åˆ’

**å¼€å§‹æ—¥æœŸ**: 2025-09-25
**æˆªæ­¢æ—¥æœŸ**: 2025-10-02ï¼ˆ7å¤©ï¼‰
**Issue**: #32

## ğŸ“‹ éœ€æ±‚åˆ†æ

### ç›®æ ‡
æ„å»ºæœ€å°åŒ–çš„Qt UI Shellï¼ŒåŒ…å«ï¼š
- è§†å›¾ç³»ç»Ÿï¼ˆViewï¼‰
- é€‰æ‹©åŠŸèƒ½ï¼ˆSelectionï¼‰
- å±æ€§é¢æ¿ï¼ˆProperty Panelï¼‰
- å‘½ä»¤è·¯ç”±ï¼ˆCommand Routingï¼‰

### äº¤ä»˜ç‰©
1. Qtåº”ç”¨éª¨æ¶ï¼ˆè·¨å¹³å°ï¼‰
2. å‘½ä»¤/åŠ¨ä½œè„šæ‰‹æ¶
3. åŸºç¡€é¡¹ç›®æ‰“å¼€/ä¿å­˜é’©å­

## ğŸ” ç°æœ‰ä»£ç è¯„ä¼°

### å·²æœ‰ç»„ä»¶
```
editor/qt/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mainwindow.cpp    âœ… ä¸»çª—å£æ¡†æ¶
â”‚   â”œâ”€â”€ canvas.cpp         âœ… ç”»å¸ƒç»„ä»¶
â”‚   â”œâ”€â”€ exporter.cpp       âœ… å¯¼å‡ºåŠŸèƒ½
â”‚   â”œâ”€â”€ export_dialog.cpp  âœ… å¯¼å‡ºå¯¹è¯æ¡†
â”‚   â””â”€â”€ main.cpp           âœ… å…¥å£ç‚¹
```

### ç°æœ‰åŠŸèƒ½
- âœ… åŸºç¡€çª—å£æ¡†æ¶
- âœ… å·¥å…·æ å’Œèœå•
- âœ… ç”»å¸ƒæ¸²æŸ“
- âœ… å¤šè¾¹å½¢æ“ä½œï¼ˆæ·»åŠ ã€ä¸‰è§’åŒ–ã€å¸ƒå°”è¿ç®—ï¼‰
- âœ… é€‰æ‹©å’Œåˆ é™¤åŠŸèƒ½
- âœ… å¯¼å‡ºåŠŸèƒ½

### ç¼ºå¤±ç»„ä»¶
- âŒ å±æ€§é¢æ¿
- âŒ å‘½ä»¤ç³»ç»Ÿæ¶æ„
- âŒ é¡¹ç›®ç®¡ç†ï¼ˆæ–°å»º/æ‰“å¼€/ä¿å­˜ï¼‰
- âŒ æ’¤é”€/é‡åšç³»ç»Ÿ

## ğŸ¯ 7å¤©å¼€å‘è®¡åˆ’

### Day 1 (9/25) - æ¶æ„è®¾è®¡
- [ ] è®¾è®¡å‘½ä»¤ç³»ç»Ÿæ¶æ„
- [ ] åˆ›å»ºCommandåŸºç±»
- [ ] å®ç°CommandManager

### Day 2 (9/26) - å±æ€§é¢æ¿
- [ ] åˆ›å»ºPropertyPanelç»„ä»¶
- [ ] å®ç°å±æ€§ç¼–è¾‘å™¨widgets
- [ ] è¿æ¥é€‰æ‹©ç³»ç»Ÿ

### Day 3 (9/27) - é¡¹ç›®ç®¡ç†
- [ ] å®ç°é¡¹ç›®æ–‡ä»¶æ ¼å¼ï¼ˆ.cgfï¼‰
- [ ] æ·»åŠ æ–°å»º/æ‰“å¼€/ä¿å­˜åŠŸèƒ½
- [ ] å®ç°æœ€è¿‘æ–‡ä»¶åˆ—è¡¨

### Day 4 (9/28) - å‘½ä»¤è·¯ç”±
- [ ] å®ç°å‘½ä»¤æ³¨å†Œæœºåˆ¶
- [ ] æ·»åŠ å¿«æ·é”®ç³»ç»Ÿ
- [ ] åˆ›å»ºå‘½ä»¤å†å²

### Day 5 (9/29) - æ’¤é”€/é‡åš
- [ ] å®ç°UndoStack
- [ ] é›†æˆåˆ°å‘½ä»¤ç³»ç»Ÿ
- [ ] æ·»åŠ UIæ§ä»¶

### Day 6 (9/30) - é›†æˆæµ‹è¯•
- [ ] å®Œæ•´å·¥ä½œæµæµ‹è¯•
- [ ] è·¨å¹³å°ç¼–è¯‘éªŒè¯
- [ ] æ€§èƒ½ä¼˜åŒ–

### Day 7 (10/1) - æ–‡æ¡£å’Œå‘å¸ƒ
- [ ] ç¼–å†™ç”¨æˆ·æ–‡æ¡£
- [ ] åˆ›å»ºç¤ºä¾‹é¡¹ç›®
- [ ] å‡†å¤‡æ¼”ç¤º

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‘½ä»¤ç³»ç»Ÿè®¾è®¡
```cpp
class Command {
public:
    virtual void execute() = 0;
    virtual void undo() = 0;
    virtual QString name() const = 0;
};

class CommandManager {
    QUndoStack* undoStack;
    QMap<QString, Command*> commands;
    QMap<QKeySequence, QString> shortcuts;
};
```

### å±æ€§é¢æ¿æ¶æ„
```cpp
class PropertyPanel : public QDockWidget {
    QTreeWidget* propertyTree;
    void updateFromSelection();
    void applyChanges();
};
```

### é¡¹ç›®ç®¡ç†
```cpp
class Project {
    QString filepath;
    QJsonDocument data;
    bool modified;

    void save();
    void load();
    void exportTo(Format fmt);
};
```

## ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåˆ†æ”¯å’ŒåŸºç¡€ç»“æ„

### 1. åˆ›å»ºå¼€å‘åˆ†æ”¯
```bash
git checkout -b feat/qt-ui-shell
```

### 2. åˆ›å»ºæ–°æ–‡ä»¶ç»“æ„
```
editor/qt/
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ command/
â”‚   â”‚   â”œâ”€â”€ command.hpp
â”‚   â”‚   â””â”€â”€ command_manager.hpp
â”‚   â”œâ”€â”€ panels/
â”‚   â”‚   â””â”€â”€ property_panel.hpp
â”‚   â””â”€â”€ project/
â”‚       â””â”€â”€ project.hpp
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ command/
â”‚   â”œâ”€â”€ panels/
â”‚   â””â”€â”€ project/
```

### 3. CMakeé…ç½®æ›´æ–°
```cmake
set(QT_UI_SHELL_SOURCES
    src/command/command_manager.cpp
    src/panels/property_panel.cpp
    src/project/project.cpp
)
```

## âœ… æˆåŠŸæ ‡å‡†

### åŠŸèƒ½éªŒè¯
- [ ] å¯ä»¥åˆ›å»ºæ–°é¡¹ç›®
- [ ] å¯ä»¥æ‰“å¼€/ä¿å­˜é¡¹ç›®
- [ ] é€‰æ‹©å¯¹è±¡æ˜¾ç¤ºå±æ€§
- [ ] å±æ€§ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆ
- [ ] å‘½ä»¤å¯æ’¤é”€/é‡åš
- [ ] å¿«æ·é”®æ­£å¸¸å·¥ä½œ

### æ€§èƒ½è¦æ±‚
- å¯åŠ¨æ—¶é—´ < 2ç§’
- é¡¹ç›®åŠ è½½ < 1ç§’
- UIå“åº” < 100ms

### å¹³å°æ”¯æŒ
- [ ] Windowsç¼–è¯‘é€šè¿‡
- [ ] macOSç¼–è¯‘é€šè¿‡
- [ ] Linuxç¼–è¯‘é€šè¿‡

## ğŸš€ ç«‹å³å¼€å§‹

### ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼šåˆ›å»ºå‘½ä»¤ç³»ç»ŸåŸºç±»
```bash
# åˆ›å»ºåˆ†æ”¯
git checkout -b feat/qt-ui-shell

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p editor/qt/include/command
mkdir -p editor/qt/src/command

# å¼€å§‹ç¼–ç 
```

## ğŸ“ ç›¸å…³èµ„æº

- Qtæ–‡æ¡£: https://doc.qt.io/
- ç°æœ‰ä»£ç : editor/qt/src/
- Issueè®¨è®º: #32
- è®¾è®¡å‚è€ƒ: CADè½¯ä»¶é€šç”¨æ¶æ„

---

**æ³¨æ„**: æ—¶é—´ç´§è¿«ï¼Œéœ€è¦æ¯å¤©å®Œæˆè®¡åˆ’ä»»åŠ¡ä»¥ç¡®ä¿æŒ‰æ—¶äº¤ä»˜ã€‚